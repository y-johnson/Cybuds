stages:
- mavenbuild
- maventest
- autodeploy

maven-build:
    stage: mavenbuild
    tags:
    - shell
    script:
    - cd /home/2_do_4/backend/code
    - sudo mvn package -B

maven-test:
    stage: maventest
    tags:
    - shell
    script:
    - cd /home/2_do_4/backend/code
    - sudo mvn test
    artifacts:
        paths:
        - /home/2_do_4/backend/code/target/*.jar

auto-deployment:
    stage: autodeploy
    tags:
    - shell
    script:
    - cd /home/2_do_4/backend/code
    - sudo mvn clean
    - sudo mvn package
    - sudo mv ./*.jar /target/cybuds-server.jar
